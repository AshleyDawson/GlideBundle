<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>

        <!-- Manipulator Collection -->

        <service id="ashleydawson.glide.manipulator_collection" class="AshleyDawson\GlideBundle\Manipulator\ManipulatorCollection" />

        <!-- Manipulators -->

        <service id="ashleydawson.glide.manipulator.orientation" class="League\Glide\Manipulators\Orientation">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.crop" class="League\Glide\Manipulators\Crop">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.size" class="League\Glide\Manipulators\Size">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.brightness" class="League\Glide\Manipulators\Brightness">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.contrast" class="League\Glide\Manipulators\Contrast">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.gamma" class="League\Glide\Manipulators\Gamma">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.sharpen" class="League\Glide\Manipulators\Sharpen">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.filter" class="League\Glide\Manipulators\Filter">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.blur" class="League\Glide\Manipulators\Blur">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.pixelate" class="League\Glide\Manipulators\Pixelate">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.watermark" class="League\Glide\Manipulators\Watermark">
            <argument key="$watermarks" type="service" id="ashleydawson.glide.filesystem.watermark" on-invalid="null"/>
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.background" class="League\Glide\Manipulators\Background">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.border" class="League\Glide\Manipulators\Border">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <service id="ashleydawson.glide.manipulator.encode" class="League\Glide\Manipulators\Encode">
            <tag name="ashleydawson.glide.manipulators" />
        </service>

        <!-- Image Manager -->

        <service id="ashleydawson.glide.image_manager" class="Intervention\Image\ImageManager">
            <argument type="collection"/>
        </service>

        <!-- API -->

        <service id="AshleyDawson\GlideBundle\Api\Api">
            <argument type="service" id="ashleydawson.glide.image_manager" />
            <argument type="service" id="ashleydawson.glide.manipulator_collection" />
        </service>

        <!-- Server Factory -->

        <service id="AshleyDawson\GlideBundle\Server\ServerFactory" public="true">
            <argument type="service" id="AshleyDawson\GlideBundle\Api\Api" />
        </service>

    </services>

</container>
